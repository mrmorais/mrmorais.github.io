<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no">

    
      <link rel="icon" href="/favicon.ico" />
    

    <title>
        
          ECMAScript 6 e como usar - Maradona Morais
        
    </title>

    <!-- Spectre.css framework (v0.5.8) -->
    <link rel="stylesheet" href="https://unpkg.com/spectre.css/dist/spectre.min.css">
    <link rel="stylesheet" href="https://unpkg.com/spectre.css/dist/spectre-exp.min.css">
    <link rel="stylesheet" href="https://unpkg.com/spectre.css/dist/spectre-icons.min.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;600;700&display=swap" rel="stylesheet">

    <!-- theme css & js -->
    
<link rel="stylesheet" href="/css/book.css">

    
<script src="/js/book.js"></script>


    <!-- tocbot -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.css">

    <!-- highlight.js -->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/default.min.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    
    <!-- katex -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">

    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-NHRGEZLTFH"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-NHRGEZLTFH');
</script>
<!-- End Google Analytics -->
<meta name="generator" content="Hexo 6.3.0"></head>

<body>

<div class="container">
  <div class="book-container">
    <div class="columns">
      <div class="column col-2 hide-lg">
        <div class="book-sidebar">
  <h4 class="site-meta">
    <a href="/">Maradona Morais</a>
  </h4>
  <div class="sidebar-content">
    <ul>
<li><a href="/">Home</a></li>
<li><a href="/about">Sobre</a></li>
<li>2022<ul>
<li>Outubro<ul>
<li><a href="/Retorno-de-processamento-assincrono-com-Redis-e-GraphQL-Subscriptions">Retorno de processamento assíncrono com Redis e GraphQL Subscriptions</a></li>
</ul>
</li>
<li>Dezembro<ul>
<li><a href="/criando-um-jogo-interativo-real-time-com-kafka-ksql-e-vert-x">Criando um jogo interativo “real-time” com Kafka, kSQL e Vert.x</a></li>
</ul>
</li>
</ul>
</li>
<li>2019<ul>
<li>Outubro<ul>
<li><a href="/Testes-com-Consumer-Driven-Contracts">Testes com Consumer-Driven Contracts</a></li>
<li><a href="/The-Lazy-World-of-Clojure">(English) The Lazy World of Clojure</a></li>
</ul>
</li>
</ul>
</li>
<li>2017<ul>
<li>Março<ul>
<li><a href="/ecmascript-6-e-como-usar">ECMAScript 6 e como usar</a></li>
<li><a href="/Aplicacao-real-time-com-socket-io-pt-1">Aplicação real-time com socket.io (parte 1)</a></li>
</ul>
</li>
<li>Junho<ul>
<li><a href="/C-eleste-Jogo-da-cobrinha-autonomo">C++eleste - Jogo da cobrinha autônomo</a></li>
</ul>
</li>
<li>Setembro<ul>
<li><a href="/Medindo-qualidade-do-servico-Uber-X-em-Natal-RN">Medindo qualidade do serviço Uber X em Natal&#x2F;RN</a></li>
</ul>
</li>
</ul>
</li>
<li>2016<ul>
<li>Maio<ul>
<li><a href="/Scraprice-API-de-monitoramento-de-precos">Scraprice - API de monitoramento de preços</a></li>
<li><a href="/Web-Scraping-com-produtos-da-Submarino-com">Web Scraping com produtos da Submarino.com</a></li>
<li><a href="/IoT-1-Que-haja-luz-com-Johnny-Five-Express-e-Arduino">[IoT 1] Que haja luz com Johnny-Five, Express e Arduino</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<small>
<a rel="license noopener" target="_blank" href="http://creativecommons.org/licenses/by-nc/4.0/"><img style="border-width:0" src="https://i.creativecommons.org/l/by-nc/4.0/88x31.png" /></a>
</small>

<br/>

<style type="text/css" media="screen">
  .gr_grid_container {
    /* customize grid container div here. eg: width: 500px; */
  }

  #gr_grid_widget_1580141760 {
    margin-top: 10px;
  }

  #gr_grid_widget_1580141760 h2 {
    font-size: 16pt;
  }

  .gr_grid_book_container {
    /* customize book cover container div here */
    float: left;
    width: 39px;
    height: 60px;
    padding: 0px 0px;
    overflow: hidden;
  }
</style>

  </div>
</div>


<script src="/js/book-sidebar.js"></script>

      </div>

      <div class="column col-8 col-lg-12">
        <div class="book-content">
          <div class="book-navbar">
  <header class="navbar">
  <section class="navbar-center">
    Maradona Morais
  </section>
  <section class="navbar-section">
    <label class="accordion-header c-hand" for="accordion-sidebar">
      <i class="icon icon-menu"></i>
    </label>
  </section>
</header>

<div class="accordion">
  <input type="checkbox" id="accordion-sidebar" name="accordion-checkbox" hidden>
  <div class="accordion-body">
    <ul>
<li><a href="/">Home</a></li>
<li><a href="/about">Sobre</a></li>
<li>2022<ul>
<li>Outubro<ul>
<li><a href="/Retorno-de-processamento-assincrono-com-Redis-e-GraphQL-Subscriptions">Retorno de processamento assíncrono com Redis e GraphQL Subscriptions</a></li>
</ul>
</li>
<li>Dezembro<ul>
<li><a href="/criando-um-jogo-interativo-real-time-com-kafka-ksql-e-vert-x">Criando um jogo interativo “real-time” com Kafka, kSQL e Vert.x</a></li>
</ul>
</li>
</ul>
</li>
<li>2019<ul>
<li>Outubro<ul>
<li><a href="/Testes-com-Consumer-Driven-Contracts">Testes com Consumer-Driven Contracts</a></li>
<li><a href="/The-Lazy-World-of-Clojure">(English) The Lazy World of Clojure</a></li>
</ul>
</li>
</ul>
</li>
<li>2017<ul>
<li>Março<ul>
<li><a href="/ecmascript-6-e-como-usar">ECMAScript 6 e como usar</a></li>
<li><a href="/Aplicacao-real-time-com-socket-io-pt-1">Aplicação real-time com socket.io (parte 1)</a></li>
</ul>
</li>
<li>Junho<ul>
<li><a href="/C-eleste-Jogo-da-cobrinha-autonomo">C++eleste - Jogo da cobrinha autônomo</a></li>
</ul>
</li>
<li>Setembro<ul>
<li><a href="/Medindo-qualidade-do-servico-Uber-X-em-Natal-RN">Medindo qualidade do serviço Uber X em Natal&#x2F;RN</a></li>
</ul>
</li>
</ul>
</li>
<li>2016<ul>
<li>Maio<ul>
<li><a href="/Scraprice-API-de-monitoramento-de-precos">Scraprice - API de monitoramento de preços</a></li>
<li><a href="/Web-Scraping-com-produtos-da-Submarino-com">Web Scraping com produtos da Submarino.com</a></li>
<li><a href="/IoT-1-Que-haja-luz-com-Johnny-Five-Express-e-Arduino">[IoT 1] Que haja luz com Johnny-Five, Express e Arduino</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<small>
<a rel="license noopener" target="_blank" href="http://creativecommons.org/licenses/by-nc/4.0/"><img style="border-width:0" src="https://i.creativecommons.org/l/by-nc/4.0/88x31.png" /></a>
</small>

<br/>

<style type="text/css" media="screen">
  .gr_grid_container {
    /* customize grid container div here. eg: width: 500px; */
  }

  #gr_grid_widget_1580141760 {
    margin-top: 10px;
  }

  #gr_grid_widget_1580141760 h2 {
    font-size: 16pt;
  }

  .gr_grid_book_container {
    /* customize book cover container div here */
    float: left;
    width: 39px;
    height: 60px;
    padding: 0px 0px;
    overflow: hidden;
  }
</style>

  </div>
</div>
</div>

<div class="book-post">
  <h1 id="ECMAScript-6-e-como-usar"><a href="#ECMAScript-6-e-como-usar" class="headerlink" title="ECMAScript 6 e como usar"></a>ECMAScript 6 e como usar</h1><p>23 de março de 2017</p>
<p>No <a href="/Aplicacao-real-time-com-socket-io-pt-1/">artigo anterior</a> comentei que a aplicação que estamos desenvolvendo depende de um ambiente que deve ser setado para que todos os módulos sejam importados e que os interpretadores entendam o código que estamos passando.</p>
<h2 id="ECMAScript"><a href="#ECMAScript" class="headerlink" title="ECMAScript (?)"></a>ECMAScript (?)</h2><p>Esse nome pode parecer estranho a primeira vista. Oras, nossa aplicação é em JavaScript, o que seria então esse ECMAScript?</p>
<p><a target="_blank" rel="noopener" href="https://pt.wikipedia.org/wiki/ECMAScript">ECMAScript</a> é uma linguagem de programação na qual o JavaScript é baseado, como também o ActionScript. Atualmente, existem dois padrões bem difundidos do ECMAScript, o 5 (ou ES5, ou ECMAScript 5) que é o padrão que por <em>default</em> todos os browsers conhecidos do mercado aceitam, e o ES6 que não tem, ainda, todas suas funcionalidades aceitas pelos browsers.</p>
<p>O ES6 é o padrão para o futuro do ECMAScript, começou a ser desenvolvido em 2011 e começou a ser difundido em 2015 [<a target="_blank" rel="noopener" href="https://developer.mozilla.org/pt-BR/docs/Web/JavaScript/Suporte_ao_ECMAScript_6_na_Mozilla">1</a>]. O ES6 nada mais é que o ES5 melhorado, todas as coisas que o ES5 pode fazer, o ES6 também pode, mas a recíproca não é válida.</p>
<p>Os principais browsers já dão suporte à vários recursos do ES6 (<a target="_blank" rel="noopener" href="https://developer.mozilla.org/pt-BR/docs/Web/JavaScript/Suporte_ao_ECMAScript_6_na_Mozilla">neste link</a> você pode ver quais recursos o Firefox já suporta do ES6). O fato é que nem todos os browsers já têm esse suporte, e para isso existem ferramentas (transcripters) que basicamente pega nosso código ES6 e o transcreve para ES5, que é suportado por todos os navegadores.</p>
<p>Ai que entra o <a target="_blank" rel="noopener" href="http://babeljs.io/">Babel</a>, um conhecido transcripter para ES6, com ele você irá programar com o JavaScript do futuro mesmo que os navegadores ainda não aceitem.</p>
<p>Note que quando eu falo navegador eu estou me referindo, na verdade, à qualquer interpretador de código JS. Isso faz com que esta regra (de suporte ao ES6) também seja válida para o Node.JS. Como sabemos (ou não), o Node utiliza a engine de interpretação do Chrome, o V8. Em outras palavras: se o Google Chrome ainda não suporta completamente o ES6, o Node.JS também não o faz.</p>
<p>O ES6 possui diversas novas <em>features</em>. Tentarei abordar algumas delea, principalmente as mais utilizadas, mas você pode acessar, <a target="_blank" rel="noopener" href="http://es6-features.org/">nesse link</a>, uma referência que contém todas as especificações das novas <em>features</em> do ES6, e utilizá-lo como base de consulta.</p>
<p>Irei mostrar como fazer a instalação do Babel e otimizar a “transcrição” com NPM, montando um cenário ideal para rodar o nosso projeto <a target="_blank" rel="noopener" href="http://goo.gl/8FrA5d">Pig Web Dice</a>. E em seguida veremos algumas novas <em>features</em> do ES6.</p>
<h2 id="Montando-um-set-up-Babel"><a href="#Montando-um-set-up-Babel" class="headerlink" title="Montando um set up Babel"></a>Montando um set up Babel</h2><p>Para utilizar o Babel, você precisará de um conhecimento básico sobre NPM (o gerenciador de pacotes para Node.js), ele já vem instalado com o Node. Verifique com um <code>npm -v</code> a versão do npm, o Babel utiliza alguns “sub-pacotes” em comum entre os que veremos a seguir e utilizar o npm versão 2.x pode causar problemas de performance devido à forma pela qual o npm 2.x importa os pacotes. Portanto, faça o upgrade para a versão 3.x do npm.</p>
<p>O babel possui diferentes pacotes, mas estes serão os necessários para usar com ES6:</p>
<ul>
<li><code>babel-core</code>: Principal pacote do Babel.</li>
<li><code>babel-cli</code>: Necessário para executar comandos a partir do <code>package.json</code> ou do Terminal.</li>
<li><code>babel-preset-env</code>: Preset do babel para determinar os plugins necessários com base nos ambientes que você deseja suportar o ES6.</li>
</ul>
<p>Vamos lá! crie o diretório para a sua aplicação, considerarei que se chama <code>ecmascript-6</code> (<code>mkdir ecmascript-6</code>) e entre no diretório (<code>cd ecmascript-6</code>). O primeiro passo é inicializar o diretório com um arquivo de configuração do <code>npm</code>, para isso execute:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init -y</span><br></pre></td></tr></table></figure>
<p>O argumento <code>-y</code> diz para o init que não queremos utilizar o modo iterativo: inserir as informações linha por linha. Perceba que o npm criou um arquivo chamado <code>package.json</code> na raíz do diretório. Esse arquivo possui todas as informações sobre nossa aplicação, tais como: nome, versão, dependencias e scripts. Inicialmente ele deve ser algo como isso:</p>
<p><strong>package.json</strong></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ecmascript-6&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;main&quot;</span><span class="punctuation">:</span> <span class="string">&quot;index.js&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;test&quot;</span><span class="punctuation">:</span> <span class="string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;keywords&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;author&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;license&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ISC&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>Primeiro vamos fazer algumas modificações básicas, como inserir o nome do autor, dar uma descrição, etc. O meu ficou assim:</p>
<p><strong>package.json</strong></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ecmascript-6&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Boilerplate para Node.JS com ES6&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;main&quot;</span><span class="punctuation">:</span> <span class="string">&quot;index.js&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;keywords&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;es6&quot;</span><span class="punctuation">,</span> <span class="string">&quot;babel&quot;</span><span class="punctuation">,</span> <span class="string">&quot;node&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;author&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Maradona Morais&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;license&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ISC&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p>Perfeito. Agora que temos o <code>package.json</code>, o npm sabe como instalar nossas dependencias. Então vamos dizer ao npm que queremos instalar os pacotes anteriormente mencionados do babel:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i --save-dev babel-core babel-cli babel-preset-env</span><br></pre></td></tr></table></figure>
<p>O <code>i</code> é uma forma curta do comando <code>install</code>. O <code>--save-dev</code> diz para o npm que as dependencias que estamos instalando são necessárias apenas para o ambiente de desenvolvimento, não são importantes para rodar aplicação em si. Perceba que na raiz foi criado o diretório <code>node_modules</code>, é aí que ficam todos os códigos dos pacotes instalados pelo npm.</p>
<p>Aqui preciso abrir um parênteses para explicar como funciona o reconhecimento de importação no Node. Quando fazemos a importação de um módulo no código Node, fazemos algo como <code>var express = require(&#39;express&#39;);</code>, o node faz a busca pelo módulo <code>express</code> em dois lugares: no <code>node_modules</code> local (o que está na raiz do diretório) e, se não encontrar aí, procura no <code>node_modules</code> global (que são os módulos instalados no seu computador, não no diretório). Para instalar um módulo globalmente faça <code>npm i -g nome-do-pacote</code>. Fechando parênteses.</p>
<p>O arquivo <code>package.json</code> foi alterado pelo npm, e agora deve está assim:</p>
<p><strong>package.json</strong></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ecmascript-6&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Boilerplate para Node.JS com ES6&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;main&quot;</span><span class="punctuation">:</span> <span class="string">&quot;index.js&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;keywords&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="string">&quot;es6&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;babel&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;node&quot;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;author&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Maradona Morais&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;license&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ISC&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;devDependencies&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;babel-cli&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^6.24.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;babel-core&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^6.24.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;babel-preset-env&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^1.2.2&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p>Ok. O Babel está instalado com sucesso. Mas ainda precisamos configurar o babel, para isso devemos criar um arquivo na raíz do projeto chamado <code>.babelrc</code>, com o seguinte conteúdo:</p>
<p><strong>.babelrc</strong></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;presets&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;env&quot;</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p>Esse simples arquivo diz para o babel qual o(s) preset(s) que ele deve utilizar ao fazer o <em>transcript</em>, aqui estamos utilizando apenas o <a target="_blank" rel="noopener" href="https://babeljs.io/docs/plugins/preset-env/">env</a> que, como dito anteriormente, determina quais plugins necessários.</p>
<p>Já estamos quase aptos para rodar um código com o ES6, falta apenas dizer como o babel irá rodar esse código. Vamos criar alguns scripts npm no arquivo <code>package.json</code>, adicione isso nas chaves do valor “scripts”:</p>
<p><strong>package.json</strong></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;start&quot;</span><span class="punctuation">:</span> <span class="string">&quot;babel-node src/index.js&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="string">&quot;babel src -d dist&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;serve&quot;</span><span class="punctuation">:</span> <span class="string">&quot;node dist/index.js&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p>Estes três scripts fazem o seguinte:</p>
<ul>
<li><code>start</code>: Inicia a aplicação com o transcript temporário. Com o <code>babel-node</code> o babel vai, basicamente, transcrever o código de <code>src/index.js</code> de ES6 para ES5, e guardar o novo código em algum folder “tmp”. Quando a aplicação terminar de rodar, ou quando você der um comando para parar o processo, o código transcriptado é perdido.</li>
<li><code>build</code>: Aqui o código é transcriptado mas não executado. O babel vai “converter” todo código que está no diretório <code>src</code> para ES6 e salvar no diretório <code>dist</code>.</li>
<li><code>serve</code>: Com esse script simplesmente mandamos rodar a aplicação que está no <code>dist</code>, essa aplicação já está em ES5, então o comando <code>node</code> entende todo o código sem ajuda do babel.</li>
</ul>
<p>Crie os diretórios <code>src</code> e <code>dist</code> na raíz do seu projeto, e dentro de <code>src</code> crie o arquivo <code>index.js</code>, com o conteúdo:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">f</span>(<span class="params">x, ...y</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> x * y.<span class="property">length</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">f</span>(<span class="number">3</span>, <span class="string">&quot;hello&quot;</span>, <span class="literal">true</span>) == <span class="number">6</span></span><br></pre></td></tr></table></figure>
<p>A definição <code>...y</code> diz que, além o <code>x</code>, nossa função <code>f</code> também pode receber mais de 1 argumento, que é passado para a função como vetor. Na chamada, passamos o <code>3</code> para <code>x</code>; o <code>&quot;hello&quot;</code> para <code>y[0]</code> e <code>true</code> para <code>y[1]</code>. Essa é uma <em>feature</em> do ES6. <a target="_blank" rel="noopener" href="https://babeljs.io/learn-es2015/#ecmascript-2015-features-default-rest-spread">ver mais sobre isso</a>.</p>
<p>Teste executar <code>npm start</code>, <code>npm run build</code> e <code>npm run serve</code> para verificar se está tudo ocorrendo como esperado, se sim agora você tem um ambiente pronto para desenvolver Node.JS com ES6.</p>
<p>Os diretório do projeto, como de costume, está disponível no GitHub e você pode acessar por <a target="_blank" rel="noopener" href="https://github.com/mrmorais/tutoriais">este link</a>.</p>
<h2 id="Novas-features-do-ES"><a href="#Novas-features-do-ES" class="headerlink" title="Novas features do ES"></a>Novas <em>features</em> do ES</h2><p>As novas funcionalidades que vêm com o ECMAScript 6 você pode ter acesso por <a href="es6-features.org/">esta referência</a> e também pelo próprio babel <a target="_blank" rel="noopener" href="https://babeljs.io/learn-es2015/">neste link</a>. Os exemplos mostrados abaixo, e neste artigo como todo, foram retirados do babeljs.io.</p>
<h3 id="Arrows-functions"><a href="#Arrows-functions" class="headerlink" title="Arrows functions"></a>Arrows functions</h3><p>O ES6 introduz um novo conceito de funções, as Arrows functios (função seta?), denotada pela expressão <code>(arg)=&gt;&#123;code&#125;</code>. Além da sintaxe ser diferente, o Arrow function já vem com o <code>bind</code> do <code>this</code> apontado para o bloco superior de códigos. Esse tipo de função é mais utilizado como <code>callback</code> (se não sabe o que é callback entenda como uma função que é passada como parâmetro de outra função). Veja um exemplo:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">nums.<span class="title function_">forEach</span>(<span class="function"><span class="params">v</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (v % <span class="number">5</span> === <span class="number">0</span>)</span><br><span class="line">    fives.<span class="title function_">push</span>(v);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>A arrow function nesse exemplo está sendo passada para o <code>forEach</code> do array <code>nums</code>, e recebe como parâmetro apenas um argumento (<code>v</code>), veja que os parênteses não são obrigatórios quando temos apenas um argumento. Dentro das <code>&#123;&#125;</code> temos um bloco de códigos convencional.</p>
<h3 id="Let-e-Const"><a href="#Let-e-Const" class="headerlink" title="Let e Const"></a>Let e Const</h3><p>No lugar do famoso <code>var</code> para inicializar uma variável, o ES6 introduz o <code>let</code>. E o <code>const</code> é utilizado para criar uma “variável” de assinatura única, ou seja, que não tem seu valor alterado em tempo de execução. Exemplos:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="number">10</span>; <span class="comment">// ES5</span></span><br><span class="line"><span class="keyword">let</span> x = <span class="number">10</span>; <span class="comment">// ES6</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> nome = <span class="string">&quot;babel&quot;</span>;</span><br><span class="line">nome = <span class="string">&quot;node&quot;</span>; <span class="comment">//Erro, const não pode ter o valor alterado</span></span><br></pre></td></tr></table></figure>

<p>Enfim. Existem diversas novas funcionalidades no ES6 e recomendo que você aprenda este novo padrão, pois é o futuro do JavaScript.</p>
<p>Espero que este artigo lhe tenha sido útil. Vejo você no próximo. Lembre-se que os códigos deste artigo estão <a target="_blank" rel="noopener" href="https://github.com/mrmorais/tutoriais">neste repositório do GitHub</a>.</p>


  <hr/>
  <p>Este trabalho está licenciado com uma Licença <a rel="license noopener" target="_blank" href="http://creativecommons.org/licenses/by-nc/4.0/">Creative Commons - Atribuição-NãoComercial 4.0 Internacional</a>.</p>
</div>


  <div class="book-comments">
    


  </div>



<script src="/js/book-post.js"></script>


<script src="/js/homelab.js"></script>


<script src="/js/meteorite.js"></script>

        </div>
      </div>

      <div class="column col-2 hide-lg">
        <div class="book-toc">
  <div class="book-tocbot">
  </div>
  <div class="book-tocbot-menu">
    <a class="book-toc-expand" onclick="expand_toc()">Expandir tudo</a>
    <a onclick="go_top()">Voltar ao topo</a>
    <a onclick="go_bottom()">Ir para o final</a>
  </div>
</div>

<script>
tocbot.init({
  tocSelector: '.book-tocbot',
  contentSelector: '.book-post',
  headingSelector: 'h1, h2, h3, h4, h5',
  collapseDepth: 2,
  orderedList: false,
  scrollSmooth: false,
});

function expand_toc(){
  var b = document.querySelector(".book-toc-expand");
  tocbot.init({
    tocSelector: '.book-tocbot',
    contentSelector: '.book-post',
    headingSelector: 'h1, h2, h3, h4, h5',
    collapseDepth: 6,
    orderedList: false,
    scrollSmooth: false,
  });
  b.setAttribute("onclick", "collapse_toc()");
  b.innerHTML = "Comprimir tudo"
}

function collapse_toc(){
  var b = document.querySelector(".book-toc-expand");
  tocbot.init({
    tocSelector: '.book-tocbot',
    contentSelector: '.book-post',
    headingSelector: 'h1, h2, h3, h4, h5',
    collapseDepth: 2,
    orderedList: false,
    scrollSmooth: false,
  });
  b.setAttribute("onclick", "expand_toc()");
  b.innerHTML = "Expandir tudo"
}

function go_top() {
  window.scrollTo(0, 0);
}

function go_bottom() {
  window.scrollTo(0, document.body.scrollHeight);
}

</script>
      </div>
    </div>
  </div>
</div>

</body>
</html>
